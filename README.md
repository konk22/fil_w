# fil_w
Кронштейн для пластика с датчиком веса, дисплеем, энкодером и подключением к HA на базе ESPHome. 

![Снимок экрана 2023-09-27 214616](https://github.com/konk22/fil_w/assets/61495394/8e81415e-8d68-43c3-a1d7-30d23567b2d4)


Устройство умеет:

  1. Замеряет вес катушки филамента;
  2. Выводит текущий вес на дисплей;
  3. Вносит корректировку веса пустой катушки;
  4. Дублирует данные в HA;
  5. Позволяет проводить калибровку как с помощью энкодера, так и с помощью HA и настраивать вес калибровочной груза;
  6. Позволяет проводить корректировку и точную настройку калибровки как с помощью энкодера так и с помощью HA;
  7. Получает профили филамента из HA для автоматической корректировки веса пустой катушки;
  8. Каждые 12 сек выводит прогресс выполненного задания печати на экран на 2 сек.

В проекте используются:

  1.  Датчик веса HX711 не менее 10кг (лучше 20кг);
  2.  OLED дисплей 128X64 I2C SSD1306 (расстояние между крепежным отверстиями 23мм);
  3.  Энкодер, на круглой плате;
  4.  Wemos d1 mini ESP32;
  5.  Подшипник F623ZZ - 12шт;
  6.  Резьбовая втулка под винт 3мм - 3шт;
  7.  Винт м3*16 - 6шт;
  8.  Винт м3*6 - 3шт;
  9.  Винт м4*20 - 2шт;
  10. Винт м5*20 - 2шт.

![image](https://github.com/konk22/fil_w/assets/61495394/e140254d-4e4f-4b8b-ac5a-6a1797b64709)

![image](https://github.com/konk22/fil_w/assets/61495394/0c2b7e39-7696-4c12-ba1b-601d30c69c52)

![image](https://github.com/konk22/fil_w/assets/61495394/2f4c4c99-ff75-4620-aeba-68fdec6988e6)

![image](https://github.com/konk22/fil_w/assets/61495394/b7639162-0fed-4286-b4d8-1d4e099277a3)

1. Для работы с профилями филамента необходимо добавить вспомогательный объект (список - input_select) в HA. Пример: "FDplast 2500/350" После символа "/" идет вес пустой катушки, до символа "/" может идти любой текст, но не слишком длинный, так как он не поместится по длинне на экран.
2. Для корректной работы необходимо зайти в Настройки -> Устройства и службы -> ESPHome, нажать кнопку "Настройки" напротив устройства Fil_w и отметить чекбокс "Разрешите устройству обращаться к службам Home Assistant."


